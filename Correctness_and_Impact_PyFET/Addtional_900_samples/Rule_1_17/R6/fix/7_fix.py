def cull_nonexistent(self, widget_ids: Set[str]) -> None:
    """Remove any widgets whose ids aren't present in a set of provided
    widget_ids.
    """
    self.states = foo()

def foo():
    return {k: v for k, v in self.states.items() if k in widget_ids}
